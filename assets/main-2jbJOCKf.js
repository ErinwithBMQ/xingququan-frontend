import{r as u,R as te,j as t,c as se,a as le}from"./index-D0tWTQow.js";import{a as v}from"./axios.config-CAifyotM.js";/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q(){return q=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},q.apply(this,arguments)}var C;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(C||(C={}));const O="popstate";function re(e){e===void 0&&(e={});function s(l,n){let{pathname:o,search:i,hash:h}=l.location;return F("",{pathname:o,search:i,hash:h},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(l,n){return typeof n=="string"?n:J(n)}return ae(s,r,null,e)}function w(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function G(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function ne(){return Math.random().toString(36).substr(2,8)}function M(e,s){return{usr:e.state,key:e.key,idx:s}}function F(e,s,r,l){return r===void 0&&(r=null),q({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?$(s):s,{state:r,key:s&&s.key||l||ne()})}function J(e){let{pathname:s="/",search:r="",hash:l=""}=e;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),l&&l!=="#"&&(s+=l.charAt(0)==="#"?l:"#"+l),s}function $(e){let s={};if(e){let r=e.indexOf("#");r>=0&&(s.hash=e.substr(r),e=e.substr(0,r));let l=e.indexOf("?");l>=0&&(s.search=e.substr(l),e=e.substr(0,l)),e&&(s.pathname=e)}return s}function ae(e,s,r,l){l===void 0&&(l={});let{window:n=document.defaultView,v5Compat:o=!1}=l,i=n.history,h=C.Pop,a=null,x=c();x==null&&(x=0,i.replaceState(q({},i.state,{idx:x}),""));function c(){return(i.state||{idx:null}).idx}function m(){h=C.Pop;let f=c(),b=f==null?null:f-x;x=f,a&&a({action:h,location:g.location,delta:b})}function d(f,b){h=C.Push;let N=F(g.location,f,b);x=c()+1;let y=M(N,x),P=g.createHref(N);try{i.pushState(y,"",P)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;n.location.assign(P)}o&&a&&a({action:h,location:g.location,delta:1})}function p(f,b){h=C.Replace;let N=F(g.location,f,b);x=c();let y=M(N,x),P=g.createHref(N);i.replaceState(y,"",P),o&&a&&a({action:h,location:g.location,delta:0})}function j(f){let b=n.location.origin!=="null"?n.location.origin:n.location.href,N=typeof f=="string"?f:J(f);return N=N.replace(/ $/,"%20"),w(b,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,b)}let g={get action(){return h},get location(){return e(n,i)},listen(f){if(a)throw new Error("A history only accepts one active listener");return n.addEventListener(O,m),a=f,()=>{n.removeEventListener(O,m),a=null}},createHref(f){return s(n,f)},createURL:j,encodeLocation(f){let b=j(f);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:p,go(f){return i.go(f)}};return g}var D;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(D||(D={}));function oe(e,s,r){return r===void 0&&(r="/"),ie(e,s,r,!1)}function ie(e,s,r,l){let n=typeof s=="string"?$(s):s,o=Y(n.pathname||"/",r);if(o==null)return null;let i=K(e);ce(i);let h=null;for(let a=0;h==null&&a<i.length;++a){let x=je(o);h=be(i[a],x,l)}return h}function K(e,s,r,l){s===void 0&&(s=[]),r===void 0&&(r=[]),l===void 0&&(l="");let n=(o,i,h)=>{let a={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};a.relativePath.startsWith("/")&&(w(a.relativePath.startsWith(l),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(l.length));let x=E([l,a.relativePath]),c=r.concat(a);o.children&&o.children.length>0&&(w(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),K(o.children,s,c,x)),!(o.path==null&&!o.index)&&s.push({path:x,score:pe(x,o.index),routesMeta:c})};return e.forEach((o,i)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))n(o,i);else for(let a of Q(o.path))n(o,i,a)}),s}function Q(e){let s=e.split("/");if(s.length===0)return[];let[r,...l]=s,n=r.endsWith("?"),o=r.replace(/\?$/,"");if(l.length===0)return n?[o,""]:[o];let i=Q(l.join("/")),h=[];return h.push(...i.map(a=>a===""?o:[o,a].join("/"))),n&&h.push(...i),h.map(a=>e.startsWith("/")&&a===""?"/":a)}function ce(e){e.sort((s,r)=>s.score!==r.score?r.score-s.score:ge(s.routesMeta.map(l=>l.childrenIndex),r.routesMeta.map(l=>l.childrenIndex)))}const de=/^:[\w-]+$/,ue=3,me=2,he=1,xe=10,fe=-2,A=e=>e==="*";function pe(e,s){let r=e.split("/"),l=r.length;return r.some(A)&&(l+=fe),s&&(l+=me),r.filter(n=>!A(n)).reduce((n,o)=>n+(de.test(o)?ue:o===""?he:xe),l)}function ge(e,s){return e.length===s.length&&e.slice(0,-1).every((l,n)=>l===s[n])?e[e.length-1]-s[s.length-1]:0}function be(e,s,r){let{routesMeta:l}=e,n={},o="/",i=[];for(let h=0;h<l.length;++h){let a=l[h],x=h===l.length-1,c=o==="/"?s:s.slice(o.length)||"/",m=V({path:a.relativePath,caseSensitive:a.caseSensitive,end:x},c),d=a.route;if(!m&&x&&r&&!l[l.length-1].route.index&&(m=V({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!m)return null;Object.assign(n,m.params),i.push({params:n,pathname:E([o,m.pathname]),pathnameBase:we(E([o,m.pathnameBase])),route:d}),m.pathnameBase!=="/"&&(o=E([o,m.pathnameBase]))}return i}function V(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,l]=ve(e.path,e.caseSensitive,e.end),n=s.match(r);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),h=n.slice(1);return{params:l.reduce((x,c,m)=>{let{paramName:d,isOptional:p}=c;if(d==="*"){let g=h[m]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const j=h[m];return p&&!j?x[d]=void 0:x[d]=(j||"").replace(/%2F/g,"/"),x},{}),pathname:o,pathnameBase:i,pattern:e}}function ve(e,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),G(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,h,a)=>(l.push({paramName:h,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),l]}function je(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return G(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function Y(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,l=e.charAt(r);return l&&l!=="/"?null:e.slice(r)||"/"}const E=e=>e.join("/").replace(/\/\/+/g,"/"),we=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function Ne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Z=["post","put","patch","delete"];new Set(Z);const ye=["get",...Z];new Set(ye);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R(){return R=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},R.apply(this,arguments)}const _e=u.createContext(null),Ce=u.createContext(null),H=u.createContext(null),I=u.createContext(null),k=u.createContext({outlet:null,matches:[],isDataRoute:!1}),ee=u.createContext(null);function T(){return u.useContext(I)!=null}function Ee(){return T()||w(!1),u.useContext(I).location}function S(){let{matches:e}=u.useContext(k),s=e[e.length-1];return s?s.params:{}}function Se(e,s){return ke(e,s)}function ke(e,s,r,l){T()||w(!1);let{navigator:n}=u.useContext(H),{matches:o}=u.useContext(k),i=o[o.length-1],h=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let x=Ee(),c;if(s){var m;let f=typeof s=="string"?$(s):s;a==="/"||(m=f.pathname)!=null&&m.startsWith(a)||w(!1),c=f}else c=x;let d=c.pathname||"/",p=d;if(a!=="/"){let f=a.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(f.length).join("/")}let j=oe(e,{pathname:p}),g=Ie(j&&j.map(f=>Object.assign({},f,{params:Object.assign({},h,f.params),pathname:E([a,n.encodeLocation?n.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?a:E([a,n.encodeLocation?n.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),o,r,l);return s&&g?u.createElement(I.Provider,{value:{location:R({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:C.Pop}},g):g}function Pe(){let e=Ue(),s=Ne(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},s),r?u.createElement("pre",{style:n},r):null,null)}const qe=u.createElement(Pe,null);class Re extends u.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?u.createElement(k.Provider,{value:this.props.routeContext},u.createElement(ee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $e(e){let{routeContext:s,match:r,children:l}=e,n=u.useContext(_e);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(k.Provider,{value:s},l)}function Ie(e,s,r,l){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),l===void 0&&(l=null),e==null){var o;if((o=r)!=null&&o.errors)e=r.matches;else return null}let i=e,h=(n=r)==null?void 0:n.errors;if(h!=null){let c=i.findIndex(m=>m.route.id&&(h==null?void 0:h[m.route.id])!==void 0);c>=0||w(!1),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,x=-1;if(r&&l&&l.v7_partialHydration)for(let c=0;c<i.length;c++){let m=i[c];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(x=c),m.route.id){let{loaderData:d,errors:p}=r,j=m.route.loader&&d[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||j){a=!0,x>=0?i=i.slice(0,x+1):i=[i[0]];break}}}return i.reduceRight((c,m,d)=>{let p,j=!1,g=null,f=null;r&&(p=h&&m.route.id?h[m.route.id]:void 0,g=m.route.errorElement||qe,a&&(x<0&&d===0?(j=!0,f=null):x===d&&(j=!0,f=m.route.hydrateFallbackElement||null)));let b=s.concat(i.slice(0,d+1)),N=()=>{let y;return p?y=g:j?y=f:m.route.Component?y=u.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=c,u.createElement($e,{match:m,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:y})};return r&&(m.route.ErrorBoundary||m.route.errorElement||d===0)?u.createElement(Re,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:N(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):N()},null)}var B=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(B||{});function Le(e){let s=u.useContext(Ce);return s||w(!1),s}function Fe(e){let s=u.useContext(k);return s||w(!1),s}function Be(e){let s=Fe(),r=s.matches[s.matches.length-1];return r.route.id||w(!1),r.route.id}function Ue(){var e;let s=u.useContext(ee),r=Le(B.UseRouteError),l=Be(B.UseRouteError);return s!==void 0?s:(e=r.errors)==null?void 0:e[l]}function _(e){w(!1)}function Te(e){let{basename:s="/",children:r=null,location:l,navigationType:n=C.Pop,navigator:o,static:i=!1,future:h}=e;T()&&w(!1);let a=s.replace(/^\/*/,"/"),x=u.useMemo(()=>({basename:a,navigator:o,static:i,future:R({v7_relativeSplatPath:!1},h)}),[a,h,o,i]);typeof l=="string"&&(l=$(l));let{pathname:c="/",search:m="",hash:d="",state:p=null,key:j="default"}=l,g=u.useMemo(()=>{let f=Y(c,a);return f==null?null:{location:{pathname:f,search:m,hash:d,state:p,key:j},navigationType:n}},[a,c,m,d,p,j,n]);return g==null?null:u.createElement(H.Provider,{value:x},u.createElement(I.Provider,{children:r,value:g}))}function Oe(e){let{children:s,location:r}=e;return Se(U(s),r)}new Promise(()=>{});function U(e,s){s===void 0&&(s=[]);let r=[];return u.Children.forEach(e,(l,n)=>{if(!u.isValidElement(l))return;let o=[...s,n];if(l.type===u.Fragment){r.push.apply(r,U(l.props.children,o));return}l.type!==_&&w(!1),!l.props.index||!l.props.children||w(!1);let i={id:l.props.id||o.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(i.children=U(l.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Me="6";try{window.__reactRouterVersion=Me}catch{}const De="startTransition",W=te[De];function Ae(e){let{basename:s,children:r,future:l,window:n}=e,o=u.useRef();o.current==null&&(o.current=re({window:n,v5Compat:!0}));let i=o.current,[h,a]=u.useState({action:i.action,location:i.location}),{v7_startTransition:x}=l||{},c=u.useCallback(m=>{x&&W?W(()=>a(m)):a(m)},[a,x]);return u.useLayoutEffect(()=>i.listen(c),[i,c]),u.createElement(Te,{basename:s,children:r,location:h.location,navigationType:h.action,navigator:i,future:l})}var z;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(z||(z={}));var X;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(X||(X={}));function Ve(){const{id:e}=S(),[s,r]=u.useState([]),[l,n]=u.useState([]),[o,i]=u.useState(!1),[h,a]=u.useState([]);u.useEffect(()=>{v.get(`/xqq/${e}`).then(c=>{r(c.data)}).catch(c=>{console.error("Error fetching data:",c)}),v.get("/post/get_all_post",{params:{xqq_id:e}}).then(c=>{n(c.data)}).catch(c=>{console.error("Error fetching data:",c)}),v.get("/user/get_name").then(c=>{a(c.data.username)}).catch(c=>{console.error("Error fetching data:",c)})},[e,o]);const x=c=>{i(!0),v.post("/post/like",{creator:h,post_id:c}).then(m=>{console.log(m.data),m.data===!0?window.location.reload():alert("你已点赞过此贴。")}).catch(m=>{console.error("Error liking post:",m)}).finally(()=>{i(!1)})};return t.jsxs("div",{children:[t.jsxs("div",{className:"fixed top-10 left-20 w-full",children:[t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/6",onClick:()=>window.location.href="/xqq_choose.html",children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"返回"})}),t.jsx("div",{className:"por mb-4 mr-4 mt-20",children:t.jsx("img",{src:`http://47.99.174.164:7001/file/show?id=${s.image_id}`,alt:"xqq image"})}),t.jsx("div",{className:"shadow-xl w-1/4 p-3 mt-4 h-full rounded-xl bg-gray-100",children:t.jsx("div",{className:"text-4xl font-semibold text-blue-200",children:s.xqq_name})}),t.jsxs("div",{className:"mt-5 bg-pink-100 shadow-xl w-1/4 p-3 h-full rounded-xl mb-20",children:[t.jsxs("div",{className:"text-xl font-semibold text-blue-400",children:["创建者：",s.creator]}),t.jsxs("div",{className:"text-xl font-semibold text-blue-400 whitespace-normal break-words",children:["简介：",s.introduction]})]}),t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/4",onClick:()=>window.location.href=`/xqq/${s.id}/post`,children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"发表帖子"})}),t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/4 mt-4",onClick:()=>window.location.href=`/xqq/${s.id}/active`,children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"用户活跃情况"})})]}),t.jsxs("div",{className:"flex flex-col bg-pink-100 items-center shadow-2xl p-4 rounded-xl w-3/4 contain",children:[t.jsx("div",{className:"text-3xl font-semibold text-white title",children:"帖子列表"}),t.jsx("div",{children:l.length===0&&t.jsx("div",{className:"text-xl font-semibold text-white mt-4",children:"暂无帖子"})}),t.jsx("div",{children:l.map(c=>t.jsxs("div",{className:"bg-blue-100 p-5 rounded-xl shadow-xl m-8",children:[t.jsx("div",{className:"text-3xl font-semibold text-pink-300 mb-4 mr-4",children:c.title}),t.jsxs("div",{className:"flex content-center justify-center mb-2",children:[t.jsxs("div",{className:"text-lg font-semibold text-blue-400 mb-4 between",children:["发布者：",c.poster_name]}),t.jsxs("div",{className:"text-lg font-semibold text-blue-400 mb-4",children:["发布时间：",c.time]})]}),c.image_id!==0&&t.jsx("div",{className:"mb-4",children:t.jsx("img",{src:`http://47.99.174.164:7001/file/show?id=${c.image_id}`,alt:"xqq image",className:"image-responsive"})}),t.jsx("button",{className:"flex flex-col bg-white p-2 rounded-xl shadow-xl mb-4 cursor-pointer w-full justify-center content-center hover:bg-gray-100",onClick:()=>window.location.href=`/post2/${c.id}`,children:t.jsx("div",{className:"text-lg font-semibold text-blue-300 whitespace-normal break-words  justify-center content-center",children:c.message})}),t.jsxs("div",{className:"flex mt-2 bg-red-50 p-2 rounded-xl shadow-lg justify-between",children:[t.jsxs("div",{className:"flex content-center justify-center",children:[t.jsxs("div",{className:"text-lg font-semibold text-red-300 mr-8",children:["点赞数：",c.like_number]}),t.jsxs("div",{className:"text-lg font-semibold text-orange-300 ml-4",children:["评论数：",c.comment_number]})]}),t.jsx("div",{children:t.jsx("img",{src:"/heart.png",alt:"xqq image",className:"heart cursor-pointer",onClick:()=>x(c.id)})})]})]},c.id))})]})]})}function We(){return t.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[t.jsx("div",{className:"mb-16",children:t.jsx("h1",{className:"text-6xl font-bold text-white",children:"欢迎来到兴趣圈!"})}),t.jsxs("div",{className:"flex flex-col space-y-4",children:[t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100",onClick:()=>window.location.href="/login.html",children:t.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"立即注册/登录"})}),t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100",onClick:()=>window.location.href="/xqq_choose.html",children:t.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"进入兴趣圈"})})]})]})}function ze(){const{id:e}=S(),[s,r]=u.useState(""),[l,n]=u.useState(""),[o,i]=u.useState(null),[h,a]=u.useState(new Date),x=parseInt(e,10),c=p=>{i(p.target.files[0])};u.useEffect(()=>{const p=setInterval(()=>{a(new Date)},1e3);return()=>{clearInterval(p)}},[]);const m=h.toLocaleString(),d=async p=>{if(p.preventDefault(),console.log("handleSubmit called"),!s||!l){alert("请填写完整的内容");return}const j=new FormData;o&&j.append("file",o);let g=0;try{o?(g=(await v.post("/file/upload",j,{headers:{"Content-Type":"multipart/form-data"}})).data,console.log("图片上传成功")):g=0}catch(b){console.error("Error:",b)}let f="0";try{const b=await v.get("user/get_name");console.log("名字获取成功",b.data),f=b.data.username}catch(b){console.error("Error:",b)}console.log(f,l,x,g,s,m);try{const b=await v.post("/post/create",{poster_name:f,message:l,xqq_id:x,image_id:g,title:s,time:m,like_number:0,comment_number:0});console.log(b.data),alert("帖子发布成功!"),window.location.href=`/xqq/${e}`}catch(b){console.error(b)}};return t.jsxs("div",{className:"flex flex-col justify-center items-center h-screen",children:[t.jsx("button",{className:"fixed top-20 left-10 w-1/6 shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 mb-40",onClick:()=>window.location.href=`/xqq/${e}`,children:t.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"返回"})}),t.jsxs("div",{className:"shell",children:[t.jsx("h1",{className:"title",children:"发表帖子"}),t.jsxs("form",{className:"form",onSubmit:d,children:[t.jsx("input",{type:"text",value:s,onChange:p=>r(p.target.value),placeholder:"帖子标题"}),t.jsx("textarea",{value:l,onChange:p=>n(p.target.value),placeholder:"帖子内容",className:"textarea"}),t.jsxs("div",{className:"flex",children:[t.jsx("input",{type:"file",onChange:c,className:"pb-4"}),t.jsx("div",{className:"text-xl font-semibold text-blue-300",children:"上传帖子图片（可不上传）"})]}),t.jsx("button",{type:"submit",className:"flex items-center justify-center shadow-xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-full",children:t.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"发表"})})]})]})]})}function Xe(){const[e,s]=u.useState([]),[r,l]=u.useState([]),{id:n}=S(),[o,i]=u.useState([]),[h,a]=u.useState(!1),[x,c]=u.useState([]);u.useEffect(()=>{v.get("/post/get_post_by_id",{params:{id:n}}).then(d=>{s(d.data)}).catch(d=>{console.error("Error fetching data:",d)}),v.get("/post/get_all_comment",{params:{post_id:n}}).then(d=>{l(d.data)}).catch(d=>{console.error("Error fetching data:",d)}),v.get("/user/touxiang",{params:{name:e.poster_name}}).then(d=>{i(d.data),console.log(d.data)}).catch(d=>{console.error("Error fetching data:",d)}),v.get("/user/get_name").then(d=>{c(d.data.username)}).catch(d=>{console.error("Error fetching data:",d)})},[n,e.poster_name,h]);const m=d=>{a(!0),v.post("/post/like",{creator:x,post_id:d}).then(p=>{console.log(p.data),p.data===!0?window.location.reload():alert("你已点赞过此贴。")}).catch(p=>{console.error("Error liking post:",p)}).finally(()=>{a(!1)})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex w-full",children:[t.jsxs("div",{className:"flex flex-col lr_between",children:[t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/6 mb-8",onClick:()=>history.go(-1),children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"返回"})}),t.jsxs("div",{className:"flex flex-col bg-pink-100 items-center shadow-2xl p-4 rounded-xl my_width",children:[t.jsx("div",{className:"text-3xl font-semibold text-white title",children:"帖子详情"}),t.jsxs("div",{className:"flex bg-blue-100 p-4 rounded-xl shadow-xl w-full m-4",children:[t.jsx("div",{className:"por mb-4 mr-4",children:t.jsx("img",{src:`http://47.99.174.164:7001/file/show?id=${o}`,alt:"xqq image"})}),t.jsx("div",{className:"mr-6"}),t.jsxs("div",{className:"flex flex-col justify-center",children:[t.jsx("div",{className:"text-3xl font-semibold text-pink-300 mb-4 ml-4",children:e.title}),t.jsxs("div",{className:"text-xl font-semibold text-blue-400 mb-4",children:["发布者：",e.poster_name]}),t.jsxs("div",{className:"text-xl font-semibold text-blue-400",children:["发布时间：",e.time]})]})]}),t.jsxs("div",{className:"flex bg-red-50 p-2 rounded-xl shadow-lg justify-between w-full",children:[t.jsxs("div",{className:"flex content-center justify-center",children:[t.jsxs("div",{className:"text-lg font-semibold text-red-300 mr-8",children:["点赞数：",e.like_number]}),t.jsxs("div",{className:"text-lg font-semibold text-orange-300 ml-4",children:["评论数：",e.comment_number]})]}),t.jsx("div",{children:t.jsx("img",{src:"/heart.png",alt:"xqq image",className:"heart cursor-pointer",onClick:()=>m(e.id)})})]}),t.jsxs("div",{className:"bg-blue-100 p-4 rounded-xl shadow-xl w-full m-4",children:[e.image_id!==0&&t.jsx("div",{className:"mb-4",children:t.jsx("img",{src:`http://47.99.174.164:7001/file/show?id=${e.image_id}`,alt:"xqq image",className:"image-responsive_post"})}),t.jsx("div",{className:"bg-white p-2 rounded-xl shadow-md w-full justify-center content-center",children:t.jsx("div",{className:"text-lg font-semibold text-blue-300 whitespace-normal break-words",children:e.message})})]})]}),t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/2 mt-8",onClick:()=>window.location.href=`/post/${e.id}/comment`,children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"发表评论"})})]}),t.jsx("div",{className:"flex flex-col bg-pink-100 items-center shadow-2xl p-4 rounded-xl w-3/5 h-full",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-3xl font-semibold text-white title",children:"评论区"}),t.jsx("div",{children:r.length===0&&t.jsx("div",{className:"text-xl font-semibold text-white mt-4",children:"暂无评论"})}),t.jsx("div",{children:r.map(d=>t.jsxs("div",{className:"bg-blue-100 p-5 rounded-xl shadow-xl m-8",children:[t.jsxs("div",{className:"flex content-center justify-center mb-2",children:[t.jsxs("div",{className:"text-lg font-semibold text-blue-400 mb-4 between_comment",children:["评论者：",d.creator]}),t.jsxs("div",{className:"text-lg font-semibold text-blue-400 mb-4",children:["评论时间：",d.time]})]}),t.jsx("div",{className:"bg-white p-2 rounded-xl shadow-md w-full justify-center content-center",children:t.jsx("div",{className:"text-lg font-semibold text-blue-300 whitespace-normal break-words",children:d.message})})]},d.id))})]})})]})})}function Ge(){const[e,s]=u.useState([]),[r,l]=u.useState([]),{id:n}=S(),[o,i]=u.useState([]),[h,a]=u.useState(!1),[x,c]=u.useState([]);u.useEffect(()=>{v.get("/post/get_post_by_id",{params:{id:n}}).then(d=>{s(d.data)}).catch(d=>{console.error("Error fetching data:",d)}),v.get("/post/get_all_comment",{params:{post_id:n}}).then(d=>{l(d.data)}).catch(d=>{console.error("Error fetching data:",d)}),v.get("/user/touxiang",{params:{name:e.poster_name}}).then(d=>{i(d.data),console.log(d.data)}).catch(d=>{console.error("Error fetching data:",d)}),v.get("/user/get_name").then(d=>{c(d.data.username)}).catch(d=>{console.error("Error fetching data:",d)})},[n,e.poster_name,h]);const m=d=>{a(!0),v.post("/post/like",{creator:x,post_id:d}).then(p=>{console.log(p.data),p.data===!0?window.location.reload():alert("你已点赞过此贴。")}).catch(p=>{console.error("Error liking post:",p)}).finally(()=>{a(!1)})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex w-full",children:[t.jsxs("div",{className:"flex flex-col lr_between",children:[t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/6 mb-8",onClick:()=>window.location.href=`/xqq/${e.xqq_id}`,children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"返回"})}),t.jsxs("div",{className:"flex flex-col bg-pink-100 items-center shadow-2xl p-4 rounded-xl my_width",children:[t.jsx("div",{className:"text-3xl font-semibold text-white title",children:"帖子详情"}),t.jsxs("div",{className:"flex bg-blue-100 p-4 rounded-xl shadow-xl w-full m-4",children:[t.jsx("div",{className:"por mb-4 mr-4",children:t.jsx("img",{src:`http://47.99.174.164:7001/file/show?id=${o}`,alt:"xqq image"})}),t.jsx("div",{className:"mr-6"}),t.jsxs("div",{className:"flex flex-col justify-center",children:[t.jsx("div",{className:"text-3xl font-semibold text-pink-300 mb-4 ml-4",children:e.title}),t.jsxs("div",{className:"text-xl font-semibold text-blue-400 mb-4",children:["发布者：",e.poster_name]}),t.jsxs("div",{className:"text-xl font-semibold text-blue-400",children:["发布时间：",e.time]})]})]}),t.jsxs("div",{className:"flex bg-red-50 p-2 rounded-xl shadow-lg justify-between w-full",children:[t.jsxs("div",{className:"flex content-center justify-center",children:[t.jsxs("div",{className:"text-lg font-semibold text-red-300 mr-8",children:["点赞数：",e.like_number]}),t.jsxs("div",{className:"text-lg font-semibold text-orange-300 ml-4",children:["评论数：",e.comment_number]})]}),t.jsx("div",{children:t.jsx("img",{src:"/heart.png",alt:"xqq image",className:"heart cursor-pointer",onClick:()=>m(e.id)})})]}),t.jsxs("div",{className:"bg-blue-100 p-4 rounded-xl shadow-xl w-full m-4",children:[e.image_id!==0&&t.jsx("div",{className:"mb-4",children:t.jsx("img",{src:`http://47.99.174.164:7001/file/show?id=${e.image_id}`,alt:"xqq image",className:"image-responsive_post"})}),t.jsx("div",{className:"bg-white p-2 rounded-xl shadow-md w-full justify-center content-center",children:t.jsx("div",{className:"text-lg font-semibold text-blue-300 whitespace-normal break-words",children:e.message})})]})]}),t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/2 mt-8",onClick:()=>window.location.href=`/post/${e.id}/comment`,children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"发表评论"})})]}),t.jsx("div",{className:"flex flex-col bg-pink-100 items-center shadow-2xl p-4 rounded-xl w-3/5 h-full",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-3xl font-semibold text-white title",children:"评论区"}),t.jsx("div",{children:r.length===0&&t.jsx("div",{className:"text-xl font-semibold text-white mt-4",children:"暂无评论"})}),t.jsx("div",{children:r.map(d=>t.jsxs("div",{className:"bg-blue-100 p-5 rounded-xl shadow-xl m-8",children:[t.jsxs("div",{className:"flex content-center justify-center mb-2",children:[t.jsxs("div",{className:"text-lg font-semibold text-blue-400 mb-4 between_comment",children:["评论者：",d.creator]}),t.jsxs("div",{className:"text-lg font-semibold text-blue-400 mb-4",children:["评论时间：",d.time]})]}),t.jsx("div",{className:"bg-white p-2 rounded-xl shadow-md w-full justify-center content-center",children:t.jsx("div",{className:"text-lg font-semibold text-blue-300 whitespace-normal break-words",children:d.message})})]},d.id))})]})})]})})}function Je(){const{id:e}=S(),[s,r]=u.useState(""),[l,n]=u.useState(new Date),o=parseInt(e,10);u.useEffect(()=>{const a=setInterval(()=>{n(new Date)},1e3);return()=>{clearInterval(a)}},[]);const i=l.toLocaleString(),h=async a=>{if(a.preventDefault(),console.log("handleSubmit called"),!s){alert("请填写完整的内容");return}let x="0";try{const c=await v.get("user/get_name");console.log("名字获取成功",c.data),x=c.data.username}catch(c){console.error("Error:",c)}try{const c=await v.post("/post/comment",{creator:x,message:s,post_id:o,time:i});console.log(c.data),alert("评论成功!"),window.location.href=`/post/${o}`}catch(c){console.error(c)}};return t.jsxs("div",{className:"flex flex-col justify-center items-center h-screen",children:[t.jsx("button",{className:"fixed top-20 left-10 w-1/6 shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 mb-40",onClick:()=>window.location.href=`/post2/${o}`,children:t.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"返回"})}),t.jsxs("div",{className:"shell",children:[t.jsx("h1",{className:"title mb-4",children:"发表评论"}),t.jsxs("form",{className:"form",onSubmit:h,children:[t.jsx("textarea",{value:s,onChange:a=>r(a.target.value),placeholder:"评论内容",className:"mb-4 textarea_now"}),t.jsx("button",{type:"submit",className:"flex items-center justify-center shadow-xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-full",children:t.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"发表"})})]})]})]})}const Ke=()=>{const{id:e}=S(),[s,r]=u.useState([]);u.useEffect(()=>{v.get("/post/get_all_post",{params:{xqq_id:e}}).then(a=>{r(a.data)}).catch(a=>{console.error("Error fetching data:",a)})},[e]);const l=s.length;let n=0,o=0;const i={};if(l>0)for(let a=0;a<l;a++){const x=s[a],c=x.poster_name;n+=x.comment_number,o+=x.like_number,i[c]?i[c]++:i[c]=1}const h=Object.entries(i).map(([a,x])=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col text-lg font-medium text-blue-400 mb-2",children:["用户 ",a,": ",x," 篇帖子"]},a)}));return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed top-10 left-20 w-full",children:t.jsx("button",{className:"flex items-center justify-center shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-1/6",onClick:()=>window.history.back(),children:t.jsx("span",{className:"text-xl font-semibold text-pink-200",children:"返回"})})}),t.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:t.jsxs("div",{className:"shell_a lr_between",children:[t.jsx("h2",{className:"title_a",children:"活跃情况"}),t.jsxs("div",{className:"flex flex-col bg-pink-100 shadow-xl p-3 w-full h-full rounded-xl mb-4",children:[t.jsxs("div",{className:"flex flex-col text-xl font-semibold text-blue-400 mb-2",children:["总帖子数量：",l]}),t.jsxs("div",{className:"flex flex-col text-xl font-semibold text-blue-400 mb-2",children:["总点赞数量：",o]}),t.jsxs("div",{className:"flex flex-col text-xl font-semibold text-blue-400 mb-2",children:["总评论数量：",n]})]}),t.jsxs("div",{className:"flex flex-col bg-pink-100 shadow-xl p-3 w-full h-full rounded-xl mb-4",children:[t.jsx("div",{className:"flex flex-col text-xl font-semibold text-red-300 mb-2",children:"用户帖子数量"}),h.length===0&&t.jsx("div",{className:"text-xl font-semibold text-white",children:"暂无数据"}),h]})]})})]})};function Qe(){const[e,s]=u.useState([]),[r,l]=u.useState(null),[n,o]=u.useState(""),[i,h]=u.useState(""),a=m=>{l(m.target.files[0])};u.useEffect(()=>{v.get("/user/get_message").then(m=>{s(m.data)}).catch(m=>{console.error("Error fetching data:",m)})},[]);const x=async m=>{if(m.preventDefault(),!r){alert("请上传头像");return}const d=new FormData;d.append("file",r);try{const j=(await v.post("/file/upload",d,{headers:{"Content-Type":"multipart/form-data"}})).data;console.log("图片上传成功");try{await v.post("/user/update_image",{name:e.name,photo_id:j}),console.log("更换头像成功"),alert("更换头像成功"),window.location.reload()}catch(g){console.error("Error updating image:",g)}}catch(p){console.error("Error uploading file:",p)}},c=async m=>{if(m.preventDefault(),!n){alert("请输入旧密码");return}try{if((await v.post("/user/update_secret",{name:e.name,old_secret:n,new_secret:i})).data===!1){alert("密码更改失败，请检查旧密码是否正确");return}console.log("密码更改成功"),alert("密码更改成功"),window.location.reload()}catch(d){console.error("Error changing password:",d),alert("密码更改失败，请检查旧密码是否正确")}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed",children:t.jsx("button",{className:"fixed top-20 left-10 w-fit shadow-2xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 mb-40",onClick:()=>window.location.href="/xqq_choose.html",children:t.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"返回"})})}),t.jsxs("div",{className:"shell0 content-center justify-center justify-items-center",children:[t.jsx("div",{className:"text-3xl font-semibold text-white title0 mb-4",children:"个人信息"}),t.jsxs("div",{className:"flex flex-col bg-pink-100 items-center shadow-2xl p-4 rounded-xl w-full h-full",children:[t.jsx("div",{className:"por mb-4",children:t.jsx("img",{src:`http://47.99.174.164:7001/file/show?id=${e.image_id}`,alt:"touxiang"})}),t.jsx("div",{className:"bg-white items-center shadow-2xl p-2 rounded-xl w-fit h-full mb-4 mt-2",children:t.jsxs("div",{className:"text-2xl font-semibold text-blue-300",children:["用户名：",e.name]})}),t.jsx("form",{onSubmit:x,children:t.jsxs("div",{className:"flex mt-4 mb-4 bg-white items-center p-2 rounded-xl w-full h-full",children:[t.jsx("input",{type:"file",onChange:a}),t.jsx("input",{type:"submit",value:"更换头像",id:"avatarBtn",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl"})]})}),t.jsxs("form",{onSubmit:c,children:[t.jsx("input",{type:"password",id:"old-password",value:n,placeholder:"请输入旧密码",onChange:m=>o(m.target.value)}),t.jsx("input",{type:"password",id:"new-password",value:i,placeholder:"请输入新密码",onChange:m=>h(m.target.value)}),t.jsx("input",{type:"submit",value:"更改密码",id:"passwordBtn",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl"})]})]})]})]})}function Ye(){return t.jsx(Ae,{children:t.jsxs(Oe,{children:[t.jsx(_,{path:"/xqq/:id",element:t.jsx(Ve,{})}),t.jsx(_,{path:"/",element:t.jsx(We,{})}),t.jsx(_,{path:"/xqq/:id/post",element:t.jsx(ze,{})}),t.jsx(_,{path:"/post/:id",element:t.jsx(Xe,{})}),t.jsx(_,{path:"/post2/:id",element:t.jsx(Ge,{})}),t.jsx(_,{path:"/post/:id/comment",element:t.jsx(Je,{})}),t.jsx(_,{path:"/xqq/:id/active",element:t.jsx(Ke,{})}),t.jsx(_,{path:"/home",element:t.jsx(Qe,{})})]})})}const Ze=se.createRoot(document.getElementById("root"));Ze.render(t.jsx(le.StrictMode,{children:t.jsx(Ye,{})}));
