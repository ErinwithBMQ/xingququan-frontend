import{r as l,j as e,c as j,a as g}from"./index-D0tWTQow.js";import{a as n}from"./axios.config-CAifyotM.js";import{U as b}from"./user-DVzhC0SZ.js";function v(){const[r,m]=l.useState(""),[o,x]=l.useState(""),[a,h]=l.useState(null),u=s=>{h(s.target.files[0])},p=async s=>{if(s.preventDefault(),console.log("handleSubmit called"),!r||!o){alert("请填写完整的信息");return}if(!a){alert("请上传头像");return}const c=new FormData;a&&c.append("file",a);let i=0;try{i=(await n.post("/file/upload",c,{headers:{"Content-Type":"multipart/form-data"}})).data,console.log("图片上传成功")}catch(t){console.error("Error:",t)}let d="0";try{const t=await n.get("user/get_name");console.log("名字获取成功",t.data),d=t.data.username}catch(t){console.error("Error:",t)}console.log(r,o);let f=1;try{const t=await n.post("/xqq/create",{xqq_name:r,introduction:o,creator:d,active_people:f,image_id:i,post_number:0});console.log(t.data),alert("创建成功!"),window.location.href="/xqq_choose.html"}catch(t){console.error(t)}};return e.jsx("div",{children:e.jsxs("div",{className:"shell",children:[e.jsx("h1",{className:"title",children:"创建兴趣圈"}),e.jsxs("form",{className:"form",onSubmit:p,children:[e.jsx("input",{type:"text",value:r,onChange:s=>m(s.target.value),placeholder:"兴趣圈名称"}),e.jsx("textarea",{value:o,onChange:s=>x(s.target.value),placeholder:"兴趣圈简介"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"file",onChange:u,className:"pb-4"}),e.jsx("div",{className:"text-xl font-semibold text-purple-400",children:"上传兴趣圈头像"})]}),e.jsx("button",{type:"submit",className:"flex items-center justify-center shadow-xl p-4 rounded-xl cursor-pointer hover:bg-gray-100 w-full",children:e.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"创建"})})]})]})})}j.createRoot(document.getElementById("root")).render(e.jsxs(g.StrictMode,{children:[e.jsx(b,{}),e.jsx("div",{className:"fixed top-20 left-10",children:e.jsx("button",{className:"shadow-2xl w-60 h-16 p-4 rounded-xl cursor-pointer hover:bg-gray-100",onClick:()=>window.location.href="/xqq_choose.html",children:e.jsx("span",{className:"text-xl font-semibold text-blue-200",children:"返回"})})}),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(v,{})})]}));
